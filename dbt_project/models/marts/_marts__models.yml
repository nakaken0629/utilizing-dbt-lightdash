version: 2

models:
  - name: fct_purchase
    description: "購入ファクトテーブル（購入明細粒度）"
    columns:
      - name: id
        description: "明細ID"
        tests:
          - unique
          - not_null
      - name: purchase_id
        description: "購入ID"
        tests:
          - not_null
      - name: member_id
        description: "会員ID"
        tests:
          - not_null
      - name: food_id
        description: "食品ID"
        tests:
          - not_null
      - name: purchased_at
        description: "購入日時"
      - name: shipping_address
        description: "送付先住所"
      - name: unit_price
        description: "単価（購入時点、円）"
      - name: quantity
        description: "数量"
      - name: subtotal
        description: "小計（円）"

  - name: dim_member
    description: "会員ディメンションテーブル"
    columns:
      - name: id
        description: "会員ID"
        tests:
          - unique
          - not_null
      - name: last_name
        description: "苗字"
      - name: first_name
        description: "名前"
      - name: birth_date
        description: "生年月日"
      - name: gender
        description: "性別（0: 男 / 1: 女 / 2: それ以外）"
      - name: address
        description: "住所"
      - name: status
        description: "ステータス（0: 無料会員 / 1: 有料会員 / 9: 退会）"
      - name: paid_at
        description: "有料会員登録日"
      - name: quit_at
        description: "退会日"
      - name: last_login_at
        description: "最終ログイン日時"
      - name: created_at
        description: "作成日時"
      - name: updated_at
        description: "更新日時"

  - name: dim_food
    description: "食品ディメンションテーブル（カテゴリ情報含む）"
    columns:
      - name: id
        description: "食品ID"
        tests:
          - unique
          - not_null
      - name: name
        description: "食品名"
      - name: category_id
        description: "カテゴリID"
        tests:
          - not_null
      - name: category_name
        description: "カテゴリ名"
      - name: price
        description: "値段（円）"
      - name: created_at
        description: "作成日時"
      - name: updated_at
        description: "更新日時"
